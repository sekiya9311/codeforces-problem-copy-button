// ==UserScript==
// @name        codeforces-problem-copy-button
// @namespace   https://sekiya9311.github.io/
// @version     1.0.0
// @description Copy the problem sentence of current page.
// @author      sekiya9311
// @supportURL  https://github.com/sekiya9311/codeforces-problem-copy-button/issues
// @updateURL   https://raw.githubusercontent.com/sekiya9311/codeforces-problem-copy-button/master/build/codeforces-problem-copy-button.user.js
// @installURL  https://raw.githubusercontent.com/sekiya9311/codeforces-problem-copy-button/master/build/codeforces-problem-copy-button.user.js
// @downloadURL https://raw.githubusercontent.com/sekiya9311/codeforces-problem-copy-button/master/build/codeforces-problem-copy-button.user.js
// @include     https://codeforces.com/*/problem/*
// @include     http://codeforces.com/*/problem/*
// ==/UserScript==

!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);window.addEventListener("load",()=>new r.Main)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Main=class{constructor(){this.ProblemStatementId="problem-statement",this.NewLine="\n";const e=document.getElementsByClassName(this.ProblemStatementId);let t=new Array;if(null!==e&&e.length>0)try{const n=e[0];{let e=n.children[0].innerText;t.push(e.replace("time limit per test","time limit per test: ").replace("memory limit per test","memory limit per test: ").replace("inputstandard input","input: standard input").replace("outputstandard output","output: standard output"))}if(n.children.length>1){const e=n.children[1];t.push(this.analyzeElement(e))}if(n.children.length>2){const e=n.children[2];t.push(this.analyzeElement(e))}if(n.children.length>3){const e=n.children[3];t.push(this.analyzeElement(e))}if(n.children.length>4&&n.children[4],n.children.length>5){const e=n.children[5];t.push(this.analyzeElement(e))}if(!this.setCopyButton(t.join(this.NewLine).split("$$$").join("")))throw new Error("Set button failed...");this.putLog("Set button success!")}catch(e){this.putLog("Set button failed...",e)}else this.putLog("Not problem page.")}analyzeElement(e){let t=new Array;return e.childNodes.forEach(e=>{switch(e.nodeName.toLowerCase()){case"#text":t.push(e.nodeValue);break;case"span":{let n=this.analyzeElement(e);n.length&&t.push(n);break}case"div":case"p":case"ul":{let n=this.analyzeElement(e);n.length&&t.push(this.NewLine+n+this.NewLine);break}case"li":{let n=this.analyzeElement(e);n.length&&t.push(this.NewLine+"ãƒ»"+n+this.NewLine);break}case"pre":case"br":case"script":break;case"msup":case"msub":case"math":case"mn":case"mi":case"mo":{let n=this.analyzeElement(e);n.length&&t.push(n);break}}}),t.join("")}setCopyButton(e){try{const t="input-output-copier";let n=document.createElement("div");n.innerText="copy problem",n.className=t,n.addEventListener("click",()=>this.textCopyToClipBoard(e));const r=document.getElementsByClassName(this.ProblemStatementId)[0];return r.insertBefore(n,r.children[0]),!0}catch(e){return console.error(e),!1}}textCopyToClipBoard(e){try{window.getSelection().removeAllRanges();const t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n?this.putLog("Copy success!"):this.putLog("Copy failed..."),n}catch(e){this.putLog("Copy failed...",e)}}putLog(e,t=null){console.log("[codeforces-problem-copy-button]: "+e),t&&console.error(t)}}}]);