// ==UserScript==
// @name        codeforces-problem-copy-button
// @namespace   https://sekiya9311.github.io/
// @version     1.0.4
// @description Copy the problem sentence of current Codeforces page.
// @author      sekiya9311
// @supportURL  https://github.com/sekiya9311/codeforces-problem-copy-button/issues
// @updateURL   https://raw.githubusercontent.com/sekiya9311/codeforces-problem-copy-button/master/build/codeforces-problem-copy-button.user.js
// @installURL  https://raw.githubusercontent.com/sekiya9311/codeforces-problem-copy-button/master/build/codeforces-problem-copy-button.user.js
// @downloadURL https://raw.githubusercontent.com/sekiya9311/codeforces-problem-copy-button/master/build/codeforces-problem-copy-button.user.js
// @include     https://codeforces.com/*/problem/*
// @include     http://codeforces.com/*/problem/*
// ==/UserScript==

!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);window.addEventListener("load",()=>new o.Main)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Main=class{constructor(){if(this.ProblemStatementClassName="problem-statement",this.SampleTestsClassName="sample-tests",this.NewLine="\n",!this.setCopyButton())throw new Error("Set button failed...");this.putLog("Set button success!")}getProblem(){const e=document.getElementsByClassName(this.ProblemStatementClassName);let t=new Array;if(!(null!==e&&e.length>0))throw new Error("Not problem page.");try{const n=e[0];{let e=n.children[0].innerText;t.push(e.replace("time limit per test","time limit per test: ").replace("memory limit per test","memory limit per test: ").replace("inputstandard input","input: standard input").replace("outputstandard output","output: standard output"))}for(let e=1;e<n.children.length;e++)if(n.children[e].className!=this.SampleTestsClassName){const o=n.children[e];t.push(this.analyzeElement(o))}return t.join(this.NewLine).split("$$$").join("")}catch(e){throw e}}analyzeElement(e){let t=new Array;const n="ol"===e.nodeName.toLowerCase();let o=0;return e.childNodes.forEach(e=>{switch(e.nodeName.toLowerCase()){case"#text":t.push(e.nodeValue);break;case"span":{let n=this.analyzeElement(e);n.length&&t.push(n);break}case"div":case"p":case"ul":{let n=this.analyzeElement(e);n.length&&t.push(this.NewLine+n+this.NewLine);break}case"li":{let r=this.analyzeElement(e);r.length&&(n&&(r=(++o).toString()+". "+r),t.push(this.NewLine+"ãƒ»"+r+this.NewLine));break}case"pre":case"br":case"script":break;case"msup":case"msub":case"math":{let n=this.analyzeElement(e);n.length&&t.push(n);break}case"mn":case"mi":case"mo":break;case"ol":case"i":case"sup":{let n=this.analyzeElement(e);n.length&&t.push(n);break}}}),t.join("")}setCopyButton(){try{const e="input-output-copier";let t=document.createElement("div");t.innerText="copy problem",t.className=e,t.addEventListener("click",()=>this.textCopyToClipBoard(this.getProblem()));const n=document.getElementsByClassName(this.ProblemStatementClassName)[0];return n.parentNode.insertBefore(t,n),!0}catch(e){return console.error(e),!1}}textCopyToClipBoard(e){try{window.getSelection().removeAllRanges();const t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n?this.putLog("Copy success!"):this.putLog("Copy failed..."),n}catch(e){this.putLog("Copy failed...",e)}}putLog(e,t=null){console.log("[codeforces-problem-copy-button]: "+e),t&&console.error(t)}}}]);